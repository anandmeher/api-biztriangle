group 'com.sabgroup'
version '1.0-SNAPSHOT'

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.4'
    }

}

repositories {
    mavenCentral()
}

apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'maven'

compileTestJava {
    sourceCompatibility = 1.8
    targetCompatibility = 1.8
    options.compilerArgs += '-parameters'
}

jar {
    manifest {
        attributes 'Implementation-Title': 'api-biztriangle',
                'Implementation-Version': version,
                'Main-Class': 'com.biztriangle.Application'
    }
}

task stage() {
    dependsOn clean, shadowJar, runApi
}


task runApi(){
    classpath = files('build/libs/*.jar')
    classpath += sourceSets.main.runtimeClasspath
    main = 'com.biztriangle.Application'
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile "com.sparkjava:spark-core:2.7.2"
}

shadowJar {
    classifier = null
}

